#!/usr/bin/env bash
#========================================================
# mk_sw799.sh - flippy DIY script for SW799 (RK3399)
#========================================================

set -e

echo "[INFO] Enter SW799 DIY script"

#--------------------------------------------------
# 必须声明：启用 RK3399 定制
#--------------------------------------------------
CUSTOMIZE_RK3399="yes"

#--------------------------------------------------
# SOC / BOARD 基本信息
#--------------------------------------------------
SOC="rk3399"
BOARD="sw799"

#--------------------------------------------------
# DTB 选择（先用一个确定存在的）
# 后续你再精修
#--------------------------------------------------
DTB_FILE="rk3399-nanopi-r4s.dtb"

#--------------------------------------------------
# Rootfs（由 workflow 提供）
#--------------------------------------------------
if [[ -z "${OPENWRT_ARMSR}" ]]; then
    echo "[ERROR] OPENWRT_ARMSR not set"
    exit 1
fi

echo "[INFO] Using rootfs: ${OPENWRT_ARMSR}"

#--------------------------------------------------
# 关键：交还给 flippy / packit
#--------------------------------------------------
packit_build

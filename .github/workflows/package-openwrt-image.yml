name: Build OpenWrt SW799 Image

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Build OpenWrt image (SW799)
        uses: ophub/flippy-openwrt-actions@main
        with:
          mode: flippy
        env:
          # ===== DIY 模式必须三行 =====
          PACKAGE_SOC: diy
          SCRIPT_DIY: mk_sw799.sh
          SCRIPT_DIY_PATH: diy/sw799/mk_sw799.sh

          # =====【关键修正项】必须指定 ARMv8 rootfs =====
          OPENWRT_ARMSR: openwrt-armsr-armv8-generic-rootfs.tar.gz

          # ===== 核心参数 =====
          KERNEL_VER: 6.6.68
          ENABLE_WIFI: false
          UPLOAD_RELEASE: true

#==========================================================================
# Description: Package OpenWrt image
# Copyright (C) 2021 https://github.com/unifreq/openwrt_packit
# Copyright (C) 2021 https://github.com/ophub/flippy-openwrt-actions
#==========================================================================

name: Build OpenWrt image (sw799 DIY)

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-22.04

    env:
      # ===== 核心三行（决定一切）=====
      PACKAGE_SOC: diy
      SCRIPT_DIY: mk_sw799.sh
      SCRIPT_DIY_PATH: diy/sw799/mk_sw799.sh

      # ===== 基础配置（保持默认即可）=====
      OPENWRT_VER: openwrt-23.05
      KERNEL_VER: 6.6.68
      ENABLE_WIFI: false
      UPLOAD_RELEASE: true

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Build OpenWrt with flippy
        uses: ophub/flippy-openwrt-actions@main
        with:
          env: ${{ toJSON(env) }}
